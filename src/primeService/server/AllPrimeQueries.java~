package primeService.server;

import java.util.concurrent.ConcurrentHashMap;

public class AllPrimeQueries{
    private volatile static AllPrimeQueries APQ = null;
    private ConcurrentHashMap<String, Integer> clientQueries;

    private AllPrimeQueries(){
	    this.clientQueries = new ConcurrentHashMap<String,Integer>();
    }

    public static AllPrimeQueries getInstance(){
	if(APQ == null){
	    synchronized(AllPrimeQueries.class){
		if(APQ == null){
		    APQ = new AllPrimeQueries();
		}
	    }
	}
	return APQ;
    }

    public void addClient(String name, int num){
	clientQueries.put(name, num);
    }

    public void printClients(){
	if(clientQueries.isEmpty()){
	    System.out.println("No clients have connected yet");
	}
	else{
	    for(String name : clientQueries.keySet()){
		System.out.println(name + " " + clientQueries.get(name));
	    }
	}
    }

    public void printClient(String clientName){
	if(clientQueries.isEmpty()){
	    System.out.println("No clients have connected yet");
	}
	else{
	    if(clientQueries.get(clientName) != null){
		int num = clientQueries.get(clientName);
		System.out.println(clientName + " " + num);
	    }
	    else{
		System.out.println("No client with that name has connected");
	    }
	}
    }
}
